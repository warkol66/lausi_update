<?php

require_once 'lausi/om/BaseAdvertisement.php';


/**
 * Skeleton subclass for representing a row from the 'lausi_advertisement' table.
 *
 * Base de Avisos
 *
 * This class was autogenerated by Propel on:
 *
 * Thu Mar 27 13:43:49 2008
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lausi
 */
class Advertisement extends BaseAdvertisement {

	/**
	 * Devuelve la fecha de finalizacion de un Aviso.
	 *
	 * @param string YYYY-MM-DD
	 *
	 */
	public function getEndDate() {
		
		$date = $this->getPublishDate();

		ereg("([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})", $date, $splitDate);
		$year = $splitDate[1];
		$month = $splitDate[2];
		$day = $splitDate[3];
		
		$timestamp = mktime(0,0,0,$month,$day+$this->getDuration(),$year);
		return date('Y/m/d',$timestamp);
		
	}
	
	public function assignWorkforce($workforce) {
		
		$this->setWorkforceId($workforce->getId());
		try {
		$this->save();
		}
		catch (PropelException $exp) {
			return false;
		}
		
		return true;
	}
	
	public function clearWorkforce() {
		
		$this->setWorkforceId(0);
		try {
		$this->save();
		}
		catch (PropelException $exp) {
			return false;
		}
		
		return true;
		
	}

} // Advertisement
